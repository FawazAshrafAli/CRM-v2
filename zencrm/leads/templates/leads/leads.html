{% extends "contacts/base.html" %}
{% load static %}

{% block title %} Leads {% endblock title %}

{% block lead %} class="active" {% endblock lead %}

{% block page_content %}
<!-- Page Content -->
<div class="content container-fluid">

    <div class="crms-title row bg-white">
        <div class="col">
            <h3 class="page-title m-0">
            <span class="page-title-icon bg-gradient-primary text-white me-2">
              <i class="feather-user"></i>
            </span> Leads </h3>
        </div>
        <div class="col text-end">
            <ul class="breadcrumb bg-white float-end m-0 ps-0 pe-0">
                <li class="breadcrumb-item"><a href="{% url 'dashboard:deals_dashboard' %}">Dashboard</a></li>
                <li class="breadcrumb-item active">Leads</li>
            </ul>
        </div>

        <div id="message-div">
            {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                <li {% if message.tags %} class="{{message.tags}}" {% endif %}>{{message}}</li>
                {% endfor %}
            </ul>
            {% endif %}
        </div>

    </div>
    
    <!-- Page Header -->
    <div class="page-header pt-3 mb-0 ">
        <div class="row">
            <div class="col">

                <div class="dropdown">
                    <a class="dropdown-toggle recently-viewed" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"> All Leads</a>
                    <div class="dropdown-menu">
                        <a class="dropdown-item" href="#">Recently Viewed</a>
                        <a class="dropdown-item" href="#">Items I'm following</a>
                        <a class="dropdown-item" href="#">All Leads</a>
                        <a class="dropdown-item" href="#">All Closed Leads</a>
                        <a class="dropdown-item" href="#">All Open Leads</a>
                        <a class="dropdown-item" href="#">Converted Leads</a>
                        <a class="dropdown-item" href="#">My Open Leads</a>
                        <a class="dropdown-item" href="#">Todays Leads</a>
                    </div>
                </div>
            </div>
            <div class="col text-end">
                <ul class="list-inline-item ps-0">
                    
                    <li class="dropdown list-inline-item add-lists">
                        <a class="dropdown-toggle recently-viewed pe-2" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"> 
                            <div class="nav-profile-text">
                              <i class="fa fa-cog" aria-hidden="true"></i>
                            </div>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="#">Choose Columns</a>
                            <a class="dropdown-item" href="#">Group Columns</a>
                            <a class="dropdown-item" href="#">Sharing Settings</a>
                            <a class="dropdown-item" href="#">Rename</a>
                            <a class="dropdown-item" href="#">Clone</a>
                            <a class="dropdown-item" href="#">Delete</a>
                        </div>
                    </li>
                    <li class="dropdown list-inline-item add-lists">
                        <a class="dropdown-toggle recently-viewed pe-2" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false"> 
                            <div class="nav-profile-text">
                              <i class="fa fa-th" aria-hidden="true"></i>
                            </div>
                        </a>
                        <div class="dropdown-menu">
                            <a class="dropdown-item" href="{% url 'leads:list' %}">List View</a>
                            <a class="dropdown-item" href="leads-kanban-view.html">Kanban View</a>
                            <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#add-new-list">Add New List View</a>
                        </div>
                    </li>
                    
                    <li class="list-inline-item">
                        <button class="add btn btn-gradient-primary font-weight-bold text-white todo-list-add-btn btn-rounded" id="add-task" data-bs-toggle="modal" data-bs-target="#add_lead">New Lead</button>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <!-- /Page Header -->
    
    <!-- Content Starts -->
    <div class="row">
        <div class="col-md-12">
            <div class="card mb-0">
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-striped table-nowrap custom-table mb-0 datatable">
                            <thead>
                                <tr>
                                    <th>
                                        <label class="container-checkbox">
                                              <input type="checkbox">
                                              <span class="checkmark"></span>
                                        </label>
                                    </th>
                                    <th>Full Name</th>
                                    <th>Title</th>
                                    <th>Company</th>
                                    <th>Phone</th>
                                    <th>Email Address</th>
                                    <th>Lead Status</th>
                                    <th>Lead Created</th>
                                    <th>Lead Owner</th>
                                    <th></th>
                                    <th class="text-end">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for lead in leads %}
                                <tr>
                                    <td class="checkBox">
                                        <label class="container-checkbox">
                                              <input type="checkbox">
                                              <span class="checkmark"></span>
                                        </label>
                                    </td>
                                    <td>
                                        {% if lead.image %}
                                        <a href="{{lead.image.url}}" target="_blank" class="avatar" style="width:30px; height:30px" ><img alt="Lead Image" src="{{lead.image.url}}"></a>
                                        {% else %}
                                        <a href="#"><span class="person-circle-a person-circle">{{lead.first_name|slice:":1"}}{{lead.last_name|slice:":1"}}</span></a>
                                        {% endif %}
                                        <a href="#" data-bs-toggle="modal" data-bs-target="#lead-modal" data-lead-id="{{ lead.pk }}" onclick="loadLeadDetails({{ lead.pk }}); return false;">{% if lead.last_name %} {{lead.first_name}} {{lead.last_name}} {% else %} {{lead.first_name}} {% endif %}</a>
                                    </td>
                                    <td>{{lead.title}}</td>
                                    <td>
                                         {{lead.organization}}		
                                    </td>
                                    <td>{{lead.phone}}</td>
                                    <td>{{lead.email}}</td>
                                    <td id="lead-status-{{lead.pk}}">{{lead.lead_status}}</td>
                                    {% comment %} <td>03-Jun-20 1:14 AM</td> {% endcomment %}
                                    <td>{{lead.created|date:"d-b-y h:i A"}}</td>
                                    <td>{{lead.lead_owner}}</td>
                                    <td class="checkBox"><i class="fa fa-star" aria-hidden="true"></i></td>
                                    <td class="text-center">
                                        <div class="dropdown dropdown-action">
                                            <a href="#" class="action-icon dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false"><i class="material-icons">more_vert</i></a>
                                            <div class="dropdown-menu dropdown-menu-right">
                                                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#edit_lead_modal" data-lead-id="{{lead.pk}}" onclick="editLead({{lead.pk}}); return false;">Edit This Lead</a>
                                                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#change_lead_image_modal" data-lead-id="{{lead.pk}}" onclick="changeLeadImage({{lead.pk}}); return false;">Change Lead Image</a>
                                                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#lead_deletion_modal" data-lead-id="{{lead.pk}}" onclick="deleteLead({{lead.pk}}); return false;">Delete This Lead</a>
                                                <a class="dropdown-item" href="mailto:{{lead.email}}">Email This Lead</a>
                                                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#clone_lead_modal" data-lead-id="{{lead.pk}}" onclick="cloneLead({{lead.pk}}); return false;">Clone This Lead</a>
                                                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#change_lead_owner_modal" data-lead-id="{{lead.pk}}" onclick="changeLeadOwner({{lead.pk}}); return false;">Change Record Owner</a>
                                                <a class="dropdown-item" href="#">Generate Merge Document</a>
                                                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#lead_to_contact_modal" data-lead-id="{{lead.pk}}" onclick="changeLeadToContact({{lead.pk}}); return false;">Change Lead to Contact</a>
                                                <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#lead_to_deal_modal" data-lead-id="{{lead.pk}}" onclick="changeLeadToDeal({{lead.pk}})">Convert Lead To Deal</a>
                                                <a class="dropdown-item" href="#" data-lead-id="{{lead.pk}}" onclick="fetchAndPrintLead({{lead.pk}}, 'lead-content-div')">Print This Lead</a>
                                                <a class="dropdown-item" href="#">Merge Into Lead</a>
                                                <a class="dropdown-item" href="#">SmartMerge Lead</a>
                                                <a class="dropdown-item" href="#">Add Activity Set To Lead</a>
                                                <a class="dropdown-item" href="#">Add New Event For Lead</a>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                {% endfor %}																								
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- /Content End -->
    
</div>
<!-- /Page Content -->
{% endblock page_content %}

{% block modals %}
<!--modal section starts here-->
<div class="modal fade" id="add-new-list">
    <div class="modal-dialog">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Add New List View</h4>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
          <form class="forms-sample">
            <div class="form-group row">
              <label for="view-name" class="col-sm-4 col-form-label">New View Name</label>
              <div class="col-sm-8">
                <input type="text" class="form-control" id="view-name" placeholder="New View Name">
              </div>
            </div>
            <div class="form-group row pt-4">
              <label class="col-sm-4 col-form-label">Sharing Settings</label>
              <div class="col-sm-8">
                <div class="form-group">
                  <div class="form-check">
                    <label class="form-check-label">
                      <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios1" value=""> Just For Me <i class="input-helper"></i></label>
                  </div><br />
                  <div class="form-check">
                    <label class="form-check-label">
                      <input type="radio" class="form-check-input" name="optionsRadios" id="optionsRadios2" value="option2" checked=""> Share Filter with Everyone <i class="input-helper"></i></label>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="text-center">
              <button type="submit" class="btn btn-gradient-primary me-2">Submit</button>
              <button class="btn btn-light">Cancel</button>
            </div>
          </form>
        </div>
     
      </div>
    </div>
  </div>

  <!-- Modal -->
      <div class="modal right fade" id="add_lead" tabindex="-1" role="dialog" aria-modal="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">

                  <div class="modal-header">
                      <h4 class="modal-title text-center">Add Lead</h4>
                      <button type="button" class="btn-close xs-close" data-bs-dismiss="modal"></button>
                    </div>

                  <div class="modal-body">
                      <div class="row">
                          <div class="col-md-12">
                              <form method="POST" action="{% url 'leads:create' %}">
                                  {% csrf_token %}
                                  <h4>Lead Information</h4>
                                  <div class="form-group row">
                                      <div class="col-md-12"><label class="col-form-label">Name <span class="text-danger">*</span></label></div>
                                      <div class="col-md-4">
                                          <input class="form-control" type="text" placeholder="Prefix" name="prefix" required>
                                      </div>
                                      <div class="col-md-4">
                                          <input class="form-control" type="text" placeholder="First name" name="first_name" required>
                                      </div>
                                      <div class="col-md-4">
                                          <input class="form-control" type="text" placeholder="Last name" name="last_name">
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Organization</label>
                                          <select class="form-control" name="company" required>
                                              <option value="" selected hidden>-- Select --</option>
                                              {% for organization in organizations %}
                                              <option value="{{organization.pk}}">{{organization}}</option>
                                              {% endfor %}
                                          </select>
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label" for="title">Title</label>
                                          <input type="text" class="form-control" name="title" placeholder="Title" required>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Lead Status</label>
                                          <select class="form-control" name="lead_status" required>
                                              <option value="" selected hidden>-- Select --</option>
                                              <option value="Not Contacted">Not Contacted</option>
                                              <option value="Attempted Contact">Attempted Contact</option>
                                              <option value="Contacted">Contacted</option>
                                              <option value="Converted">Converted</option>
                                          </select>
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">User Responsible</label>
                                          <select class="form-control" name="user_responsible" required>
                                              <option disabled selected hidden>-- Select --</option>
                                              {% for user in users %}
                                              <option value="{{user.pk}}">{{user.full_name}}</option>
                                              {% endfor %}
                                          </select>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Lead Rating</label>
                                          <input type="number" class="form-control" name="lead_rating" placeholder="Rating">
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Lead Owner</label>
                                          <select class="form-control" name="lead_owner" required>
                                              <option disabled selected hidden>-- Select --</option>
                                              {% for user in users %}
                                              <option value="{{user.pk}}">{{user.full_name}}</option>
                                              {% endfor %}
                                          </select>
                                      </div>
                                  </div>
                                  <h4>Additional Information</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Email</label>
                                          <input type="text" class="form-control"  name="email" placeholder="Email" required>
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Email Opted out</label>
                                          <div >
                                            <label class="container-checkbox">
                                                <input type="checkbox" name="email_opted_out">
                                                <span class="checkmark"></span>
                                          </label>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Phone</label>
                                          <input type="text" class="form-control" name="phone" placeholder="Phone">
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Mobile Phone</label>
                                          <input type="text" class="form-control" name="mobile_phone" placeholder="Mobile Phone" required>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Fax</label>
                                          <input type="text" class="form-control" name="fax" placeholder="Fax">
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Website</label>
                                          <input type="text" class="form-control"  name="website" placeholder="Website">
                                      </div>
                                  </div>
                                  
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Industry</label>
                                          <input type="text" class="form-control" name="industry" placeholder="Industry">
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Number of Employees</label>
                                          <input type="text" class="form-control"  name="number_of_employees" placeholder="Number of Employees">
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Lead Source</label>
                                          <select class="form-control" name="lead_source" required>
                                              <option value="" selected hidden>-- Select --</option>
                                              <option value="Web">Web</option>
                                              <option value="Phone Enquiry">Phone Enquiry</option>
                                              <option value="Partner Referral">Partner Referral</option>
                                              <option value="Purchased List">Purchased List</option>
                                              <option value="Other">Other</option>
                                           </select>
                                      </div>
                                      
                                  </div>
                                  
                                  <h4>Address Information</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-12">
                                          <label class="col-form-label">Mailing Address</label>
                                          <textarea class="form-control" rows="3" name="mailing_address" placeholder="Address" required></textarea>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <input type="text" class="form-control" placeholder="City" name="mailing_city" required>
                                      </div>
                                      <div class="col-sm-6">
                                          <input type="text" class="form-control" placeholder="State/Provience" name="mailing_state" required>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <input type="text" class="form-control" placeholder="Postal Code" name="mailing_postal_code" required>
                                      </div>
                                      <div class="col-sm-6">
                                          <select class="form-control" name="mailing_country" required>
                                              <option hidden selected>Country</option>
                                              {% for country in countries %}
                                              <option value="{{country}}">{{country}}</option>
                                              {% endfor %}
                                          </select>
                                      </div>
                                  </div>
                                  
                                  <h4>Description Information</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-12">
                                          <label class="col-form-label">Description </label>
                                          <textarea class="form-control" rows="3" id="description" name="description" placeholder="Description"></textarea>
                                      </div>
                                  </div>
                                  <h4>Tag Information</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-12">
                                          <label class="col-form-label">Tag List</label>
                                          <input type="text" class="form-control" name="tag_list" placeholder="Tag List">
                                      </div>
                                  </div>
                                  <h4>Permissions</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Permission</label>
                                          <select class="form-control" name="permission" required>
                                              <option value="" selected hidden>-- Select --</option>
                                              <option>Task Visibility</option>
                                              <option>Private Task</option>
                                           </select>
                                      </div>
                                      
                                  </div>
                                  <div class="text-center py-3">
                                      <button type="submit" class="border-0 btn btn-primary btn-gradient-primary btn-rounded">Save</button>&nbsp;&nbsp;
                                      <button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal" aria-labe="Close">Cancel</button>
                                  </div>
                              </form>
                          </div>
                      </div>

                  </div>

              </div><!-- modal-content -->
          </div><!-- modal-dialog -->
      </div><!-- modal -->

      <!-- Modal (Edit Lead) -->
      <div class="modal right fade" id="edit_lead_modal" tabindex="-1" role="dialog" aria-modal="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">

                  <div class="modal-header">
                      <h4 class="modal-title text-center">Edit Lead</h4>
                      <button type="button" class="btn-close xs-close" data-bs-dismiss="modal"></button>
                    </div>

                  <div class="modal-body">
                      <div class="row">
                          <div class="col-md-12">
                              <form method="POST" id="lead-edition-form">
                                  {% csrf_token %}
                                  <h4>Lead Information</h4>
                                  <div class="form-group row">
                                      <div class="col-md-12"><label class="col-form-label">Name <span class="text-danger">*</span></label></div>
                                      <div class="col-md-4">
                                          <input class="form-control" type="text" placeholder="Prefix" name="prefix" id="prefix-value" required>
                                      </div>
                                      <div class="col-md-4">
                                          <input class="form-control" type="text" placeholder="First name" name="first_name" id="first-name-value" required>
                                      </div>
                                      <div class="col-md-4">
                                          <input class="form-control" type="text" placeholder="Last name" name="last_name" id="last-name-value">
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Organization</label>
                                          <select class="form-control" name="organization" id="organization-value" required>
                                              <option value="" selected hidden>-- Select --</option>
                                              {% for organization in organizations %}
                                              <option value="{{organization.pk}}">{{organization.name}}</option>
                                              {% endfor %}
                                          </select>
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label" for="title">Title</label>
                                          <input type="text" class="form-control" name="title" id="title-value" placeholder="Title" required>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Lead Status</label>
                                          <select class="form-control" name="lead_status" id="lead-status-value" required>
                                              <option value="" selected hidden>-- Select --</option>
                                              <option value="Not Contacted">Not Contacted</option>
                                              <option value="Attempted Contact">Attempted Contact</option>
                                              <option value="Contacted">Contacted</option>
                                              <option value="Converted">Converted</option>
                                          </select>
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">User Responsible</label>
                                          <select class="form-control" name="user_responsible" id="user-responsible-value">
                                              <option value="" selected hidden>-- Select --</option>
                                              {% for user in users %}
                                              <option value="{{user.pk}}">{{user.name}}</option>
                                              {% endfor %}
                                          </select>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Lead Rating</label>
                                          <input type="number" class="form-control" name="lead_rating" id="lead-rating-value" placeholder="Rating">
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Lead Owner</label>
                                          <select class="form-control" name="lead_owner" id="lead-owner-value" required>
                                              <option value="" selected hidden>-- Select --</option>
                                              {% for user in users %}
                                              <option value="{{user.pk}}">{{user.name}}</option>
                                              {% endfor %}
                                          </select>
                                      </div>
                                  </div>
                                  <h4>Additional Information</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Email</label>
                                          <input type="text" class="form-control"  name="email" id="email-value" placeholder="Email" required>
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Email Opted out</label>
                                          <div >
                                            <label class="container-checkbox">
                                                <input type="checkbox" name="email_opted_out" id="email-opted-out-value">
                                                <span class="checkmark"></span>
                                          </label>
                                          </div>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Phone</label>
                                          <input type="text" class="form-control" name="phone" id="phone-value" placeholder="Phone">
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Mobile Phone</label>
                                          <input type="text" class="form-control" name="mobile_phone" id="mobile-phone-value" placeholder="Mobile Phone" required>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Fax</label>
                                          <input type="text" class="form-control" name="fax" id="fax-value" placeholder="Fax">
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Website</label>
                                          <input type="text" class="form-control"  name="website" id="website-value" placeholder="Website">
                                      </div>
                                  </div>
                                  
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Industry</label>
                                          <input type="text" class="form-control" name="industry" id="industry-value" placeholder="Industry">
                                      </div>
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Number of Employees</label>
                                          <input type="text" class="form-control"  name="number_of_employees" id="number-of-employees-value" placeholder="Number of Employees">
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Lead Source</label>
                                          <select class="form-control" name="lead_source" id="lead-source-value" required>
                                              <option value="" selected hidden>-- Select --</option>
                                              <option value="Web">Web</option>
                                              <option value="Phone Enquiry">Phone Enquiry</option>
                                              <option value="Partner Referral">Partner Referral</option>
                                              <option value="Purchased List">Purchased List</option>
                                              <option value="Other">Other</option>
                                           </select>
                                      </div>
                                      
                                  </div>
                                  
                                  <h4>Address Information</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-12">
                                          <label class="col-form-label">Mailing Address</label>
                                          <textarea class="form-control" rows="3" name="mailing_address" id="mailing-address-value" placeholder="Address" required></textarea>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <input type="text" class="form-control" placeholder="City" name="mailing_city" id="mailing-city-value" required>
                                      </div>
                                      <div class="col-sm-6">
                                          <input type="text" class="form-control" placeholder="State/Provience" name="mailing_state" id="mailing-state-value" required>
                                      </div>
                                  </div>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <input type="text" class="form-control" placeholder="Postal Code" name="mailing_postal_code" id="mailing-postal-code-value" required>
                                      </div>
                                      <div class="col-sm-6">
                                          <select class="form-control" name="mailing_country" id="mailing-country-value" required>
                                              <option hidden selected>Country</option>
                                              {% for country in countries %}
                                              <option value="{{country}}">{{country}}</option>
                                              {% endfor %}
                                          </select>
                                      </div>
                                  </div>
                                  
                                  <h4>Description Information</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-12">
                                          <label class="col-form-label">Description </label>
                                          <textarea class="form-control" rows="3" id="description-value" name="description" placeholder="Description"></textarea>
                                      </div>
                                  </div>
                                  <h4>Tag Information</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-12">
                                          <label class="col-form-label">Tag List</label>
                                          <input type="text" class="form-control" name="tag_list" id="tag-list-value" placeholder="Tag List">
                                      </div>
                                  </div>
                                  <h4>Permissions</h4>
                                  <div class="form-group row">
                                      <div class="col-sm-6">
                                          <label class="col-form-label">Permission</label>
                                          <select class="form-control" name="permission" id="permission-value" required>
                                              <option value="" selected hidden>-- Select --</option>
                                              <option value="Private Task">Private Task</option>
                                              <option value="Public Task">Public Task</option>
                                           </select>
                                      </div>
                                      
                                  </div>
                                  <div class="text-center py-3">
                                      <button type="submit" class="border-0 btn btn-primary btn-gradient-primary btn-rounded">Save</button>&nbsp;&nbsp;
                                      <button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal" aria-labe="Close">Cancel</button>
                                  </div>
                              </form>
                          </div>
                      </div>

                  </div>

              </div><!-- modal-content -->
          </div><!-- modal-dialog -->
      </div><!-- modal (Edit Lead) -->

      <!-- Modal (Change Lead Image) -->
      <div class="modal fade" id="change_lead_image_modal" tabindex="-1" role="dialog" aria-modal="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">

                  <div class="modal-header">
                      <h4 class="modal-title text-center">Edit Lead</h4>
                      <button type="button" class="btn-close xs-close" data-bs-dismiss="modal"></button>
                    </div>

                  <div class="modal-body">
                      <div class="row">
                          <div class="col-md-12">
                              <form method="POST" enctype="multipart/form-data" id="change-lead-image-form">
                                  {% csrf_token %}
                                  <h4>Lead Image</h4>
                                  <div class="form-group row">
                                      <div class="col-md-12"><label class="col-form-label">Lead Image <span class="text-danger">*</span></label></div>
                                      <div class="col-md-12">
                                          <input class="form-control" type="file" placeholder="Lead Image" id="image-input" name="image" required>
                                          <a href='#' target="_blank" id="image-value"></a>
                                      </div>				                            
                                  </div>						                
                                  <div class="text-center py-3">
                                      <button type="submit" class="border-0 btn btn-primary btn-gradient-primary btn-rounded">Save</button>&nbsp;&nbsp;
                                      <button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal" aria-labe="Close">Cancel</button>
                                  </div>
                              </form>
                          </div>
                      </div>

                  </div>

              </div><!-- modal-content -->
          </div><!-- modal-dialog -->
      </div><!-- modal (Change Lead Image) -->

      <!-- Modal (Delete Lead) -->
      <div class="modal fade" id="lead_deletion_modal" tabindex="-1" role="dialog" aria-modal="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">

                  <div class="modal-header">
                      <h4 class="modal-title text-center">Deleting Lead '<span id="deleting-lead-object"></span>'</h4>
                      <button type="button" class="btn-close xs-close" data-bs-dismiss="modal"></button>
                    </div>

                  <div class="modal-body">
                      <div class="row">
                          <div class="col-md-12">
                              <form method="GET" id="lead-deletion-form">
                                  {% csrf_token %}
                                  <h4>Are you sure?</h4>						            						                
                                  <div class="text-center py-3">
                                      <button type="submit" class="border-0 btn btn-primary btn-gradient-primary btn-rounded">Yes</button>&nbsp;&nbsp;
                                      <button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal" aria-labe="Close">Cancel</button>
                                  </div>
                              </form>
                          </div>
                      </div>

                  </div>

              </div><!-- modal-content -->
          </div><!-- modal-dialog -->
      </div><!-- modal (Delete Lead) -->

      <!-- Modal (Clone Lead) -->
      <div class="modal fade" id="clone_lead_modal" tabindex="-1" role="dialog" aria-modal="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">

                  <div class="modal-header">
                      <h4 class="modal-title text-center">Cloning Lead '<span id="cloning-lead-object"></span>'</h4>
                      <button type="button" class="btn-close xs-close" data-bs-dismiss="modal"></button>
                    </div>

                  <div class="modal-body">
                      <div class="row">
                          <div class="col-md-12">
                              <form method="POST" id="clone-lead-form">
                                  {% csrf_token %}
                                  <h4>Are you sure?</h4>						            						                
                                  <div class="text-center py-3">
                                      <button type="submit" class="border-0 btn btn-primary btn-gradient-primary btn-rounded">Yes</button>&nbsp;&nbsp;
                                      <button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal" aria-labe="Close">Cancel</button>
                                  </div>
                              </form>
                          </div>
                      </div>

                  </div>

              </div><!-- modal-content -->
          </div><!-- modal-dialog -->
      </div><!-- modal (Clone Lead) -->

      <!-- Modal (Change Lead Owner) -->
      <div class="modal fade" id="change_lead_owner_modal" tabindex="-1" role="dialog" aria-modal="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">

                  <div class="modal-header">
                      <h4 class="modal-title text-center">Edit Lead</h4>
                      <button type="button" class="btn-close xs-close" data-bs-dismiss="modal"></button>
                    </div>

                  <div class="modal-body">
                      <div class="row">
                          <div class="col-md-12">
                              <form method="POST" id="change-lead-owner-form">
                                  {% csrf_token %}
                                  <h4>Lead Owner</h4>
                                  <div class="form-group row">
                                      <div class="col-md-12"><label class="col-form-label">Lead Owner <span class="text-danger">*</span></label></div>
                                      <div class="col-md-12">
                                          <select class="form-control" name="record_owner" id="record-owner-value" required>
                                              <option hidden>-- Select --</option>
                                              {% for user in users %}
                                              <option value="{{user.pk}}">{{user.name}}</option>
                                              {% endfor %}
                                          </select>
                                      </div>				                            
                                  </div>						                
                                  <div class="text-center py-3">
                                      <button type="submit" class="border-0 btn btn-primary btn-gradient-primary btn-rounded">Save</button>&nbsp;&nbsp;
                                      <button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal" aria-labe="Close">Cancel</button>
                                  </div>
                              </form>
                          </div>
                      </div>

                  </div>

              </div><!-- modal-content -->
          </div><!-- modal-dialog -->
      </div><!-- modal (Change Lead Owner) -->

      <!-- Modal (Lead to Contact) -->
      <div class="modal fade" id="lead_to_contact_modal" tabindex="-1" role="dialog" aria-modal="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">

                  <div class="modal-header">
                      <h4 class="modal-title text-center">Change Lead to Contact '<span id="converting-lead-object"></span>'</h4>
                      <button type="button" class="btn-close xs-close" data-bs-dismiss="modal"></button>
                    </div>

                  <div class="modal-body">
                      <div class="row">
                          <div class="col-md-12">
                              <form method="POST" id="lead-to-contact-form">
                                  {% csrf_token %}
                                  <h4>Are you sure?</h4>						            						                
                                  <div class="text-center py-3">
                                      <button type="submit" class="border-0 btn btn-primary btn-gradient-primary btn-rounded">Yes</button>&nbsp;&nbsp;
                                      <button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal" aria-labe="Close">Cancel</button>
                                  </div>
                              </form>
                          </div>
                      </div>

                  </div>

              </div><!-- modal-content -->
          </div><!-- modal-dialog -->
      </div><!-- modal (Lead to Contact) -->

      <!-- Modal (Lead to Deal) -->
      <div class="modal fade" id="lead_to_deal_modal" tabindex="-1" role="dialog" aria-modal="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">
                  <div class="modal-header">
                      <h4 class="modal-title text-center">Change Lead to Deal '<span id="converting-lead-to-deal-object"></span>'</h4>
                      <button type="button" class="btn-close xs-close" data-bs-dismiss="modal"></button>
                    </div>
                  <div class="modal-body">
                      <div class="row">
                          <div class="col-md-12">
                              <form method="POST" id="lead-to-deal-form">
                                  {% csrf_token %}
                                  <h4>Are you sure?</h4>						            						                
                                  <div class="text-center py-3">
                                      <button type="submit" class="border-0 btn btn-primary btn-gradient-primary btn-rounded">Yes</button>&nbsp;&nbsp;
                                      <button type="button" class="btn btn-secondary btn-rounded" data-bs-dismiss="modal" aria-labe="Close">Cancel</button>
                                  </div>
                              </form>
                          </div>
                      </div>
                  </div>
              </div><!-- modal-content -->
          </div><!-- modal-dialog -->
      </div><!-- modal (Lead to Deal) -->

      <!-- Modal (Print Lead) -->
      <div class="modal right fade" id="print_lead_modal" tabindex="-1" role="dialog" aria-modal="true">
          <div class="modal-dialog" role="document">
              <div class="modal-content">
                  <div class="modal-header">
                      <h4 class="modal-title text-center">Print Deal</h4>
                      <button type="button" class="btn-close xs-close" data-bs-dismiss="modal"></button>
                    </div>
                  <div class="modal-body">
                      <div class="tab-pane show active p-0" id="not-contact-task-details">
                          <div class="crms-tasks" id="lead-content-div">
                            <div class="tasks__item crms-task-item active">
                              <div class="accordion-header js-accordion-header">Lead Information</div> 
                                <div class="accordion-body js-accordion-body d-block">
                                  <div class="accordion-body__contents">
                                      <table class="table">
                                          <tbody>
                                            <tr>
                                              <td class="border-0">Record ID</td>
                                              <td class="border-0 lead-id"></td>
                                            </tr>
                                            <tr>
                                              <td>Name</td>
                                              <td class="lead-full-name"></td>
                                            </tr>
                                            <tr>
                                              <td>Title</td>
                                              <td class="lead-title"></td>
                                            </tr>
                                            <tr>
                                                <td>Organization</td>
                                                <td class="lead-organization"></td>
                                            </tr>
                                            <tr>
                                                <td>Lead Status</td>
                                                <td class="lead-status"></td>
                                            </tr>
                                            <tr>
                                                <td>User Responsible</td>
                                                <td class="lead-user-responsible"></td>
                                            </tr>
                                            <tr>
                                                <td>Link Email Address</td>
                                                <td class="lead-email"></td>
                                            </tr>
                                            <tr>
                                                <td>Lead Owner</td>
                                                <td class="lead-owner"></td>
                                            </tr>
                                            <tr>
                                                <td>Lead Created</td>
                                                <td class="lead-created"></td>
                                            </tr>
                                            <tr>
                                                <td>Date of Last Activity</td>
                                                <td class="lead-updated"></td>
                                            </tr>
                                            <tr>
                                                <td>Date of Next Activity</td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td>Lead Rating</td>
                                                <td class="lead-rating"></td>
                                            </tr>
                                          </tbody>
                                      </table>
                                  </div>
                              </div>
                        </div>
                        <div class="tasks__item crms-task-item active">
                          <div class="accordion-header js-accordion-header">Additional Information</div> 
                            <div class="accordion-body js-accordion-body d-block">
                              <div class="accordion-body__contents">
                                    <table class="table">
                                      <tbody>
                                        <tr>
                                          <td>Email Address</td>
                                          <td class="lead-email"></td>
                                        </tr>
                                        <tr>
                                          <td>Email Opted Out</td>
                                          <td class="text-capitalize lead-email-opted-out"></td>
                                        </tr>
                                        <tr>
                                          <td>Phone</td>
                                          <td class="lead-phone"></td>
                                        </tr>
                                        <tr>
                                          <td>Mobile Phone</td>
                                          <td class="lead-mobile-phone"></td>
                                        </tr>
                                        <tr>
                                          <td>Fax</td>
                                          <td class="lead-fax"></td>
                                        </tr>
                                        <tr>
                                          <td>Website</td>
                                          <td class="lead-website"></td>
                                        </tr>
                                        <tr>
                                          <td>Industry</td>
                                          <td class="lead-industry"></td>
                                        </tr>
                                        <tr>
                                            <td>Number of Employees</td>
                                            <td class="lead-number-of-employees"></td>
                                        </tr>
                                        <tr>
                                            <td>Lead Source</td>
                                            <td class="lead-source"></td>
                                        </tr>
                                        
                                      </tbody>
                                   </table>
                              </div>
                          </div>
                        </div>
                        <div class="tasks__item crms-task-item active">
                          <div class="accordion-header js-accordion-header">Address Information</div> 
                            <div class="accordion-body js-accordion-body d-block">
                              <div class="accordion-body__contents">
                                  <table class="table">
                                      <tbody>
                                          <tr>
                                              <td>Address</td>
                                              <td class="lead-mailing-address"></td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>
                              
                          </div>
                        </div>
                        <div class="tasks__item crms-task-item active">
                          <div class="accordion-header js-accordion-header">Description Information</div> 
                            <div class="accordion-body js-accordion-body d-block">
                              <div class="accordion-body__contents">
                                    <table class="table">
                                      <tbody>
                                        <tr>
                                          <td>Description</td>
                                          <td class="lead-description"></td>
                                        </tr>
                                      </tbody>
                                  </table>
                              </div>
                              
                          </div>
                        </div>
                       
                        <div class="tasks__item crms-task-item active">
                          <div class="accordion-header js-accordion-header">Tag Information</div> 
                            <div class="accordion-body js-accordion-body d-block">
                              <div class="accordion-body__contents">
                                <table class="table">
                                      <tbody>
                                        <tr>
                                          <td class="border-0">Tag List</td>
                                          <td class="border-0 lead-tag-list"></td>
                                        </tr>
                                      </tbody>
                                    </table>
                              </div>
                              
                          </div>
                        </div>
                        <div class="tasks__item crms-task-item active">
                          <div class="accordion-header js-accordion-header">Lead Conversion Information</div> 
                            <div class="accordion-body js-accordion-body d-block">
                              <div class="accordion-body__contents">
                                  <table class="table">
                                      <tbody>
                                          <tr>
                                              <td>Converted Contact</td>
                                              <td>John</td>
                                          </tr>
                                          <tr>
                                              <td>Converted Organization</td>
                                              <td>Umbrella</td>
                                          </tr>
                                          <tr>
                                              <td>Converted Opportunity</td>
                                              <td>Lorem ipsum</td>
                                          </tr>
                                      </tbody>
                                  </table>
                              </div>
                              
                          </div>
                        </div>
                      </div>
                      </div>
                  </div>
              </div><!-- modal-content -->
          </div><!-- modal-dialog -->
      </div><!-- modal (Print Lead) -->

      <!-- Lead Modal Start -->
      {% include "leads/lead_modal.html" %}
      <!-- Lead Modal End -->
{% endblock modals %}

{% block scripts %}
<!-- Print Lead Function -->
<script src="{% static 'js/leads/fetchAndPrintLead.js' %}"></script>

<!-- Fetching lead details function -->
<script src="{% static 'js/leads/loadLeadDetails.js' %}"></script>

<!-- Edit Lead function -->
<script src="{% static 'js/leads/editLead.js' %}"></script>

<!-- Update Lead Status Function -->
<script src={% static 'js/leads/updateLeadStatus.js' %}></script>

<!-- Change Lead Image Function -->
<script src={% static 'js/leads/changeLeadImage.js' %}></script>

<!-- Delete Lead Function -->
<script src={% static 'js/leads/deleteLead.js' %}></script>

<!-- Clone Lead Function -->
<script src={% static 'js/leads/cloneLead.js' %}></script>

<!-- Change Lead Owner Function -->
<script src={% static 'js/leads/changeLeadOwner.js' %}></script>

<!-- Change Lead To Contact Function -->
<script src={% static 'js/leads/changeLeadToContact.js' %}></script>

<!-- Change Lead To Deal Function -->
<script src={% static 'js/leads/changeLeadToDeal.js' %}></script>

<!-- Message TimeOut Function -->
<script src="{% static 'js/messageTimeOut.js' %}"></script>
{% endblock scripts %}